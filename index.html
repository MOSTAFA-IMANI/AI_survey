<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ูุฑู ฺฉุงุฑฺฏุงู ููุด ูุตููุน</title>

    <!-- Bootstrap RTL + Vazirmatn -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" />

    <style>
        body { font-family: 'Vazirmatn', sans-serif; background-color: #f9f9f9; }
        .container { max-width: 800px; margin-top: 30px; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.08); }

        /* Likert button group aesthetic */
        .likert-group .btn {
          border-radius: 10px !important;
          padding: .55rem .85rem;
          border: 1px solid #e5e7eb;
          background: #f8fafc;
          color: #111827;
          transition: all .15s ease-in-out;
        }
        .likert-group .btn:hover { background: #eef2ff; border-color: #c7d2fe; }
        .likert-group .btn-check:checked + .btn {
          background: #0d6efd;
          color: #fff;
          border-color: #0d6efd;
          box-shadow: 0 0 0 .2rem rgba(13,110,253,.15);
        }
        .scale-hints { font-size: .85rem; color: #6b7280; }
        .hint-row { display: flex; justify-content: space-between; margin-top: .35rem; }
        .hint-row span { white-space: nowrap; }
        .section-title { font-weight: 700; font-size: 1.05rem; }

        /* Loading overlay styles */
        #loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: 'Vazirmatn', sans-serif;
            font-size: 1.2rem;
            color: #333;
            display: none;
        }
        .spinner {
            border: 4px solid #e5e7eb;
            border-top: 4px solid #0d6efd;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
<div class="container">
    <h4 class="text-center mb-4">ูุฑู ุซุจุชโูุงู ฺฉุงุฑฺฏุงู ููุด ูุตููุน</h4>

    <form id="ai-form" action="https://n8n.rymon-afzar.ir/webhook/e3905b74-63ec-4a66-bbbb-a9cca2864538" method="POST" novalidate>

        <!-- ูพุงุณุฎ ุจุงุฒ -->
        <div class="mb-3">
            <label class="form-label">ูุงู ู ูุงู ุฎุงููุงุฏฺฏ ุดูุง ฺุณุชุ</label>
            <input type="text" name="name" class="form-control" required />
        </div>

        <div class="mb-3">
            <label class="form-label">ุงูู ุณุงุฒูุงู ุง ุดุฎุต ุดูุง ฺุณุชุ</label>
            <input type="email" name="email" class="form-control" required />
        </div>

        <div class="mb-3">
            <label class="form-label">ุนููุงู ุดุบู ุง ุณูุช ูุนู ุดูุง ฺุณุชุ</label>
            <input type="text" name="job_title" class="form-control" />
        </div>

        <!-- ุชฺฉโฺฏุฒููโุง: ูุงุญุฏ ุณุงุฒูุงู -->
        <div class="mb-3">
            <label class="form-label">ุฏุฑ ฺฉุฏุงู ูุงุญุฏ ุณุงุฒูุงู ูุนุงูุช ูโฺฉูุฏุ</label>
            <select class="form-select" name="department" required>
                <option selected disabled>ุงูุชุฎุงุจ ฺฉูุฏ</option>
                <option>ุชููุฏ</option>
                <option>ุชุญูู ู ุชูุณุนู</option>
                <option>ุชุถูู ฺฉูุช</option>
                <option>ุงูู ู ุจูุฏุงุดุช</option>
                <option>ุฒูุฌุฑู ุชุฃูู</option>
                <option>ูุงุฑฺฉุชูฺฉ</option>
                <option>ูุฑูุด</option>
                <option>ุณุณุชู ูุง ู ุฑูุด ูุง</option>
                <option>ุข ุช</option>
                <option>ุชูุณุนู ฺฉุณุจ ู ฺฉุงุฑ</option>
                <option>ูุงู</option>
                <option>ุญุณุงุจุฑุณ</option>
                <option>ุญููู</option>
                <option>ุณุงุฑ</option>
            </select>
        </div>

        <!-- ุณุงุนุงุช ุงุณุชูุงุฏู ุงุฒ ฺฉุงููพูุชุฑ -->
        <div class="mb-3">
            <label class="form-label">ุจูโุทูุฑ ูุงูฺฏู ุฏุฑ ุฑูุฒ ฺูุฏ ุณุงุนุช ุงุฒ ฺฉุงููพูุชุฑ ุงุณุชูุงุฏู ูโฺฉูุฏุ</label>
            <select class="form-select" name="computer_usage">
                <option>ฺฉูุชุฑ ุงุฒ ฑ ุณุงุนุช</option>
                <option>ฑโณ ุณุงุนุช</option>
                <option>ดโถ ุณุงุนุช</option>
                <option>ุจุด ุงุฒ ถ ุณุงุนุช</option>
            </select>
        </div>

        <!-- ุณุงุนุงุช ุงุณุชูุงุฏู ุงุฒ ุงูุชุฑูุช -->
        <div class="mb-3">
            <label class="form-label">ุจูโุทูุฑ ูุงูฺฏู ุฏุฑ ุฑูุฒ ฺูุฏ ุณุงุนุช ุงุฒ ุงูุชุฑูุช ุงุณุชูุงุฏู ูโฺฉูุฏุ</label>
            <select class="form-select" name="internet_usage">
                <option>ฺฉูุชุฑ ุงุฒ ฑ ุณุงุนุช</option>
                <option>ฑโณ ุณุงุนุช</option>
                <option>ดโถ ุณุงุนุช</option>
                <option>ุจุด ุงุฒ ถ ุณุงุนุช</option>
            </select>
        </div>

        <!-- ฺูุฏฺฏุฒููโุง: ุงุจุฒุงุฑูุง -->
        <div class="mb-3">
            <label class="form-label">ุจุง ฺฉุฏุงูโฺฉ ุงุฒ ุงุจุฒุงุฑูุง ุฒุฑ ฺฉุงุฑ ฺฉุฑุฏูโุงุฏุ</label>
            <div class="row row-cols-1 row-cols-sm-2 g-2">
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="ChatGPT" id="t1"><label class="form-check-label" for="t1">ChatGPT</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Google Sheets" id="t2"><label class="form-check-label" for="t2">Google Sheets</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Gemini" id="t3"><label class="form-check-label" for="t3">Gemini</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Google Calendar" id="t4"><label class="form-check-label" for="t4">Google Calendar</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Copilot" id="t5"><label class="form-check-label" for="t5">Copilot</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Notion AI" id="t6"><label class="form-check-label" for="t6">Notion AI</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Bing AI" id="t7"><label class="form-check-label" for="t7">Bing AI</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="n8n" id="t8"><label class="form-check-label" for="t8">n8n</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Claude" id="t9"><label class="form-check-label" for="t9">Claude</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Grammarly" id="t10"><label class="form-check-label" for="t10">Grammarly</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="NotebookLM" id="t11"><label class="form-check-label" for="t11">NotebookLM</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Midjourney" id="t12"><label class="form-check-label" for="t12">Midjourney</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Whisper" id="t13"><label class="form-check-label" for="t13">Whisper</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="DALLยทE" id="t14"><label class="form-check-label" for="t14">DALLยทE</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="Deepseek" id="t15"><label class="form-check-label" for="t15">Deepseek</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="RunwayML" id="t16"><label class="form-check-label" for="t16">RunwayML</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="tools" value="ูฺโฺฉุฏุงู" id="t17"><label class="form-check-label" for="t17">ูฺโฺฉุฏุงู</label></div>
            </div>
        </div>

        <div class="mb-3"><label class="form-label">ุฏูุณุช ุฏุงุฑุฏ ุงุฒ ุงู ฺฉุงุฑฺฏุงู ฺู ฺุฒ ุงุฏ ุจฺฏุฑุฏุ</label><textarea class="form-control" name="workshop_expectation" rows="3"></textarea></div>
        <div class="mb-3"><label class="form-label">ุจู ูุธุฑ ุดูุง ููุด ูุตููุน ฺุณุชุ</label><textarea class="form-control" name="ai_definition" rows="3"></textarea></div>
        <div class="mb-3"><label class="form-label">ุฏุฑ ูุงุญุฏ ุง ุญูุฒู ฺฉุงุฑ ุดูุง ฺู ูุณุฆูู ุง ฺุงูุด ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุชุตูุฑ ูโฺฉูุฏ ููุด ูุตููุน ูโุชูุงูุฏ ุจู ุญู ุขู ฺฉูฺฉ ฺฉูุฏุ</label><textarea class="form-control" name="ai_challenges" rows="3"></textarea></div>

        <!-- Likert: ุณุทุญ ุฒุจุงู ุงูฺฏูุณ -->
        <div class="mb-3">
            <div class="d-flex justify-content-between align-items-center">
                <label class="form-label section-title mb-1">ุณุทุญ ุฒุจุงู ุงูฺฏูุณ ฺุทูุฑ ุงุณุชุ</label>
                <small class="text-muted">ุงูุชุฎุงุจ ุดูุง: <span id="english-value">ณ</span>/ต</small>
            </div>
            <div class="btn-group w-100 likert-group" role="group">
                <input type="radio" class="btn-check" name="english_level" id="eng1" value="1"><label class="btn flex-fill me-2" for="eng1">ฑ<br><small>ุฎู ุถุนู ๐</small></label>
                <input type="radio" class="btn-check" name="english_level" id="eng2" value="2"><label class="btn flex-fill me-2" for="eng2">ฒ<br><small>ุถุนู ๐</small></label>
                <input type="radio" class="btn-check" name="english_level" id="eng3" value="3" checked><label class="btn flex-fill me-2" for="eng3">ณ<br><small>ูุชูุณุท ๐</small></label>
                <input type="radio" class="btn-check" name="english_level" id="eng4" value="4"><label class="btn flex-fill me-2" for="eng4">ด<br><small>ุฎูุจ ๐</small></label>
                <input type="radio" class="btn-check" name="english_level" id="eng5" value="5"><label class="btn flex-fill" for="eng5">ต<br><small>ุนุงู ๐</small></label>
            </div>
            <div class="scale-hints hint-row"><span>ุฎู ุถุนู</span><span>ุนุงู</span></div>
        </div>

        <!-- Likert: ุชุงุซุฑ ููุด ูุตููุน -->
        <div class="mb-3">
            <div class="d-flex justify-content-between align-items-center">
                <label class="form-label section-title mb-1">ุงุฒ ฑ ุชุง ต ุชุงุซุฑ ููุด ูุตููุน ุจุฑ ุขูุฏู ุดุบู/ุณุงุฒูุงู ุดูุงุ</label>
                <small class="text-muted">ุงูุชุฎุงุจ ุดูุง: <span id="impact-value">ณ</span>/ต</small>
            </div>
            <div class="btn-group w-100 likert-group" role="group">
                <input type="radio" class="btn-check" name="ai_impact" id="imp1" value="1"><label class="btn flex-fill me-2" for="imp1">ฑ<br><small>ุฎู ฺฉู</small></label>
                <input type="radio" class="btn-check" name="ai_impact" id="imp2" value="2"><label class="btn flex-fill me-2" for="imp2">ฒ<br><small>ฺฉู</small></label>
                <input type="radio" class="btn-check" name="ai_impact" id="imp3" value="3" checked><label class="btn flex-fill me-2" for="imp3">ณ<br><small>ูุชูุณุท</small></label>
                <input type="radio" class="btn-check" name="ai_impact" id="imp4" value="4"><label class="btn flex-fill me-2" for="imp4">ด<br><small>ุฒุงุฏ</small></label>
                <input type="radio" class="btn-check" name="ai_impact" id="imp5" value="5"><label class="btn flex-fill" for="imp5">ต<br><small>ุฎู ุฒุงุฏ โก</small></label>
            </div>
            <div class="scale-hints hint-row"><span>ุฎู ฺฉู</span><span>ุฎู ุฒุงุฏ</span></div>
        </div>

        <!-- ููุน ูุญุชูุง -->
        <div class="mb-3">
            <label class="form-label">ุชุฑุฌุญ ูโุฏูุฏ ุฏุฑ ุทูู ุฏูุฑู ุจุดุชุฑ ุจุง ฺฉุฏุงู ููุน ูุญุชูุง ุขุดูุง ุดูุฏุ</label>
            <div class="row row-cols-1 row-cols-sm-2 g-2">
                <div class="form-check"><input class="form-check-input" type="checkbox" name="preferred_content" value="ูุซุงูโูุง ูุงูุน ุงุฒ ุงุฑุงู" id="pc1"><label class="form-check-label" for="pc1">ูุซุงูโูุง ูุงูุน ุงุฒ ุงุฑุงู</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="preferred_content" value="ฺฉุณโูุง ุจูโุงูููู ูููู" id="pc2"><label class="form-check-label" for="pc2">ฺฉุณโูุง ุจูโุงูููู ูููู</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="preferred_content" value="ุงุจุฒุงุฑูุง ฺฉุงุฑุจุฑุฏ ู ุฏูโุฏุณุช" id="pc3"><label class="form-check-label" for="pc3">ุงุจุฒุงุฑูุง ฺฉุงุฑุจุฑุฏ ู ุฏูโุฏุณุช</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="preferred_content" value="ููุงูู ู ุชุฑูุฏูุง" id="pc4"><label class="form-check-label" for="pc4">ููุงูู ู ุชุฑูุฏูุง</label></div>
                <div class="form-check"><input class="form-check-input" type="checkbox" name="preferred_content" value="ููู ููุงุฑุฏ" id="pc5"><label class="form-check-label" for="pc5">ููู ููุงุฑุฏ</label></div>
            </div>
        </div>

        <!-- ุฏุบุฏุบู ุฐูู -->
        <div class="mb-3">
            <label class="form-label">ุขุง ุณูุงู ุง ุฏุบุฏุบูโุง ุฏุฑ ุฐูู ุฏุงุฑุฏ ฺฉู ุฏูุณุช ุฏุงุฑุฏ ุฏุฑ ฺฉูุงุณ ูพุงุณุฎ ุฏุงุฏู ุดูุฏุ</label>
            <textarea class="form-control" name="questions" rows="3"></textarea>
        </div>

        <button type="submit" class="btn btn-primary w-100 mt-3">ุซุจุช</button>
    </form>
</div>

<!-- Loading overlay -->
<div id="loading-overlay">
    <div class="spinner"></div>
    <div>ุฏุฑ ุญุงู ุชุญูู ุฏุงุฏูโูุง ุดูุง ูุณุชู...</div>
</div>

<script>
    function showLoading() {
        document.getElementById("loading-overlay").style.display = "flex";
    }
    function hideLoading() {
        document.getElementById("loading-overlay").style.display = "none";
    }

    document.getElementById("ai-form").addEventListener("submit", function (e) {
        e.preventDefault();
        const form = this;

        const toolsSelected = Array.from(form.querySelectorAll('input[name="tools"]:checked')).map(el => el.value);
        const preferredSelected = Array.from(form.querySelectorAll('input[name="preferred_content"]:checked')).map(el => el.value);

        const data = {
            name: form.querySelector('[name="name"]').value,
            email: form.querySelector('[name="email"]').value,
            job_title: form.querySelector('[name="job_title"]').value,
            department: form.querySelector('[name="department"]').value,
            computer_usage: form.querySelector('[name="computer_usage"]').value,
            internet_usage: form.querySelector('[name="internet_usage"]').value,
            tools_used: toolsSelected,
            workshop_expectation: form.querySelector('[name="workshop_expectation"]').value,
            ai_definition: form.querySelector('[name="ai_definition"]').value,
            ai_challenges: form.querySelector('[name="ai_challenges"]').value,
            english_level: form.querySelector('input[name="english_level"]:checked')?.value || "",
            ai_impact: form.querySelector('input[name="ai_impact"]:checked')?.value || "",
            preferred_content: preferredSelected,
            questions: form.querySelector('[name="questions"]').value
        };

        showLoading(); // show loading before sending

        const startTime = Date.now();

        fetch(form.action, {
            method: 'POST',
            body: JSON.stringify(data),
            headers: { 'Content-Type': 'application/json' }
        })
        .then(res => res.text())
        .then(res => {
            const elapsed = Date.now() - startTime;
            const delay = Math.max(2000 - elapsed, 0); // ensure at least 2 seconds
            setTimeout(() => {
                hideLoading();
                alert("ุงุทูุงุนุงุช ุจุง ููููุช ุซุจุช ุดุฏ โ\nุงูู ุงุฎุชุตุงุต ุจุฑุง ุดูุง ุชุง ุฏูุงู ุฏฺฏุฑ ุงุฑุณุงู ูุดูุฏ  ๐ง");
                form.reset();
                document.getElementById('eng3').checked = true;
                document.getElementById('imp3').checked = true;
                syncLikertLabels();
            }, delay);
        })
        .catch(err => {
            hideLoading();
            alert("โ ุฎุทุง ุฏุฑ ุงุฑุณุงู ุงุทูุงุนุงุช");
            console.error(err);
        });
    });
</script>
</body>
</html>
